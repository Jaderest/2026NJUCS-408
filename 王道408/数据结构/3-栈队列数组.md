# 第三章 栈、队列和数组

## 目录
- [第三章 栈、队列和数组](#第三章-栈队列和数组)
  - [目录](#目录)
- [3.1 栈](#31-栈)
- [3.2 队列](#32-队列)
  - [3.2.2 循环队列](#322-循环队列)
  - [3.2.3 链式队列](#323-链式队列)
  - [3.2.4 双端队列](#324-双端队列)
    - [输出序列合法性判断](#输出序列合法性判断)
- [3.3 栈、队列的应用](#33-栈队列的应用)
  - [3.3.2 栈在表达式求值](#332-栈在表达式求值)
    - [中缀表达式to后缀表达式](#中缀表达式to后缀表达式)
    - [后缀表达式求值](#后缀表达式求值)
  - [3.3.3 栈实现递归调用](#333-栈实现递归调用)
  - [3.3.4 队列在层次遍历中应用](#334-队列在层次遍历中应用)
  - [3.3.5 队列在OS中应用](#335-队列在os中应用)
    - [缓冲区是一个队列](#缓冲区是一个队列)
    - [请求使用CPU——多队列](#请求使用cpu多队列)
  - [3.3.x 好题整理](#33x-好题整理)

# 3.1 栈

- n个不同的元素进栈，出栈元素不同排列个数为$\frac{1}{n+1}C_{2n}^{n}$，称为卡特兰数

- 弄清最基本的c语言操作
  - top指向栈顶元素时
    - ++top：top先自加1，再作为右值被读取
    - top--：传递一个本值的copy，再自减1
  - top指向栈顶元素下一个位置时
    - top++
    - --top

- 共享栈
  - 两个栈的栈顶指针都指向**栈顶元素**（而不是空元素）（当然考试有不同的初始化方法）
  - top0=-1时，0号栈为空；top1=MaxSize时，1号栈为空
  - top1-top0=1时，栈满

# 3.2 队列

## 3.2.2 循环队列

做题的时候一定要考虑：

- front指向队首元素                  还是 指向队首元素前一个位置
- rear指向队尾元素后一个位置 还是 指向队尾元素

这个涉及到队空条件判断、队满条件判断、指针初始值计算

## 3.2.3 链式队列

- 队列：尾入、头出

- 带首尾结点非循环单链表：尾入O(1)；首出O(1)

  ```c
  // 尾入
  void Push(Queue &q, int e) {
      Node *n = (Node *)malloc(sizeof(Node));
      n->value = e;
      //! 很重要，队尾元素next指针必须置空（保证严密）
      n->next = NULL; // 有就选这个，更严密
      
      q.tail->next = n;
      q.tail = n;
  }
  // 首出
  void Pop(Queue &q, int e) {
      e = q.head->value;
      q.head = q.head->next;
  }
  ```

- 所以：单链表实现队列，队头在链表链头位置

## 3.2.4 双端队列

为方便讨论：左端称前端，右端称后端

- 输出受限：一端允许插入删除，另一端只允许插入
- 输入受限：一端允许插入删除，另一端只允许删除

### 输出序列合法性判断

现有输入序列1、2、3、4，则所有可能的输出序列有$A_4^4=24$种

- 双端队列可退化成**栈**：只一端能够插入删除 —— 所以栈的合法输出必定是双端队列的合法输出
  - 只需要会验证就行，然后记一下卡特兰数公式

- **输入受限的双端队列**
- **输出受限的双端队列**
- 好吧好像没有通法，一个一个验证就行

# 3.3 栈、队列的应用

## 3.3.2 栈在表达式求值

### 中缀表达式to后缀表达式

### 后缀表达式求值

## 3.3.3 栈实现递归调用

通常递归算法若有其对应的非递归算法，**非递归算法的效率通常更高**

​	因为递归算法要入栈出栈，更麻烦一点

## 3.3.4 队列在层次遍历中应用

## 3.3.5 队列在OS中应用

### 缓冲区是一个队列

### 请求使用CPU——多队列

## 3.3.x 好题整理

火车轨道：1~9列车，以8、4、2、5、3、9、1、6、7驶入n条轨道；驶出的次序为1~9，求n至少是（   ）

- 分析可知，轨道前面的编号必须比后面的小，所以示意如下（前->后）
  - 8 - 9
  - 4 - 5（贪心，找不大于它的最大的） - 6 - 7
  - 2 - 3
  - 1
- 于是最少4条
- 贪心一般能对，不然用眼睛看一下它是不是最简单的情况
